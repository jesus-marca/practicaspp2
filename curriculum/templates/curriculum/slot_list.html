{% extends 'base.html' %}
{% load static %}
{% load operation %}
{% block title %} Horarios {% endblock %}


{% block image_block %}
<link rel="stylesheet" href="{% static 'css/home_css.css' %}">


<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<link rel="stylesheet" href="{% static 'css/master_css.css' %}">
<link rel="stylesheet" href="{% static 'css/home_css.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
<div style="height: 15vh;"></div>
{% comment %} <header class="info-header">
  <div id="page-intro" class="container-fluid d-flex align-items-center justify-content-center"> 
    <div class="row d-flex justify-content-center text-center " style="width: 40%; justify-self: center;align-self: center;margin-top: 5rem;">
      <div id="carouselExample" class="carousel slide" style=" margin-left:0px;width: 100%;">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img style="width:100%;" src="https://www.sneakerlost.es/hubfs/Las-universidades-se-adaptan-a-las-necesidades-02.png" class="d-block " alt="nueva imagen2">
            <p style="color: white;font-size: 1.5rem ;">Primero de primaria</p>
          </div>
          <div class="carousel-item">
            <img style="width:100%;" src="https://www.sneakerlost.es/hubfs/Como-atraer-y-retener-alumnos-extranjeros-01.png?noresize" class="d-block " alt="nueva imagen2">
            <p style="color: white;font-size: 1.5rem ;">Segundo de primaria</p>
          </div>
          <div class="carousel-item">
            <img style="width:100%;" src="https://www.sneakerlost.es/hubfs/5-ejemplos-de-como-fijar-los-objetivos-SMART-02.png" class="d-block " alt="nueva imagen2">
            <p style="color: white;font-size: 1.5rem;;">Tercero de primaria</p>
          </div>
          <div class="carousel-item">
            <img style="width:100%;" src="https://www.sneakerlost.es/hubfs/5-ejemplos-de-como-fijar-los-objetivos-SMART-02.png" class="d-block " alt="nueva imagen2">
            <p style="color: white;font-size: 1.5rem;;">Cuarto de primaria</p>
          </div>
          <div class="carousel-item">
            <img style="width:100%;" src="https://www.sneakerlost.es/hubfs/5-ejemplos-de-como-fijar-los-objetivos-SMART-02.png" class="d-block " alt="nueva imagen2">
            <p style="color: white;font-size: 1.5rem;;">Quinto de primaria</p>
          </div>
          <div class="carousel-item">
            <img style="width:100%;" src="https://www.sneakerlost.es/hubfs/5-ejemplos-de-como-fijar-los-objetivos-SMART-02.png" class="d-block " alt="nueva imagen2">
            <p style="color: white;font-size: 1.5rem;;">Sexto de primaria</p>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
    </div>
  </div>

</header> {% endcomment %}
{% endblock %}

{% block content %}
  <div class="d-flex row justify-content-center"  style="width: 100% ;margin-left: 0.2%;">
      <h2 class="text-center mt-5 mb-4" style="font-size: 3rem;">Horarios de los cursos</h2>
      {% comment %} <div class="d-flex row justify-content-center" style="height: auto">
        <div class=" d-flex  justify-content-center align-items-center" style="width: 73%;">
          <div  class="tablero bg-info d-flex flex-column justify-content-center align-items-center ">
            <div>
              <p class="letras">niveles</p>
              {%for numero in numeroNiveles.all %}
                {%if forloop.last %} 
                  <p class="numero">{{forloop.counter}}</p>
                {%endif%}
              {%endfor%}
            </div>  
          </div>
          <div  class="bg-success tablero d-flex flex-column justify-content-center align-items-center">
            <div>
              <p class="letras" >cursos</p>
              {%for numero in numeroCursos.all %}
                {%if forloop.last %} 
                  <p class="numero">{{forloop.counter}}</p>
                {%endif%}
              {%endfor%}
            </div>
          </div>
          <div  class="bg-danger tablero d-flex flex-column justify-content-center align-items-center">
            <div>
              <p class="letras">capitulos</p>
              {%for numero in numeroCapitulos.all %}
                {%if forloop.last %} 
                  <p class="numero">{{forloop.counter}}</p>
                {%endif%}
              {%endfor%}
            </div>
          </div>
          <div  class="bg-dark tablero d-flex flex-column justify-content-center align-items-center">
            <div>
              <p class="letras">Comentarios</p>
              {%for numero in numeroComentarios.all %}
                {%if forloop.last %} 
                  <p class="numero">{{forloop.counter}}</p>
                {%endif%}
              {%endfor%}
            </div>
          </div>
        </div>
      </div> {% endcomment %}

      <div class="d-flex justify-content-center">
        <div class="contenedor-niveles">
          {%for a in standards.all%}
            
                <p style="width: 90%;">
                  <button class="btn btn-primary" style="width: 100%;" type="button" data-bs-toggle="collapse" data-bs-target={{a.slug|combinacion}} aria-expanded="false" aria-controls={{a.slug|parseada}}>
                  {{a.slug}}
                  </button>
                </p>
            
                <div class="collapse " id="{{a.slug|parseada}}" style="margin-top: -1rem;width: 90%;">
                  <div class="card card-body d-flex justify-content-center ">
                    <section id="best-features" class="text-center" style=" width: 100%;justify-self: center;">                    
                      <div class="col-md-12 justify-content-center mb-5">                    
                            <table id="class-time-table" class="tabla-encabezado">
                              <tr>
                                <th></th>                    
                                <th scope="row">8 a.m.</th>
                                <th scope="row">9 a.m.</th>
                                <th scope="row">10 a.m.</th>
                                <th scope="row">11 a.m.</th>
                                <th scope="row">12 m.</th>
                                <th scope="row">1 p.m.</th>
                                <th scope="row">2 p.m.</th>
                              </tr>

                              <tr>
                              
                                
                                <th>Lunes</th>
                                                            
                                {% for slt in slotsAll.all %}                                
                                  
                             
                                                                                       
                                  {%for subject in a.subjects.all%}
                                 
                                    {%if subject.standard_slots_subject.all.count != 0 %}
                                                                              
                                        {%for slot in subject.standard_slots_subject.all %}
                                                
                                          {%if slot.day.id == 1 and slot.slot == slt %}                                                                                                                                         
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                            {% define 1 as variable %}                                                                                                                                                                                        
                                          {% endif %}                                                    
                                        {%endfor%}                                                                                                                                                           
                                    {% endif %}
                                    {% if total.all.count|add:variable == total.all.count %}
                                      <td>{{total.all.count|add:variable}}</td>                                    
                                    {% endif %} 
                                  {%endfor%}
                                                                                                                                       

                                {% endfor %}
                              
                              </tr>
                              <tr>
                                <th>Martes</th>
                                {% for slt in slotsAll.all %}
                                
                                    {%for subject in a.subjects.all%}

                                            {%for slot in subject.standard_slots_subject.all %}
                                            
                                                {%if slot.day.id == 2 %} 
                                                
                                                
                                                    {% if  slot.slot == slt %}
                                                        <td  style="background-color: hsl({{slot.slot_subject.id | multiplicar }}, 71%, 82%);" >{{slot.slot_subject}}</td> 
                                                    
                                                    {% endif %}
                                                {% endif %}
                                            {%endfor%}                                                                                                                      
                                    {%endfor%}  
                                {% endfor %}
                              </tr>
                              <tr>
                                <th>Miercoles</th>
                                {% for slt in slotsAll.all %}
                                
                                    {%for subject in a.subjects.all%}

                                            {%for slot in subject.standard_slots_subject.all %}
                                            
                                                {%if slot.day.id == 3 %} 
                                                
                                                
                                                    {% if  slot.slot == slt %}
                                                        <td  style="background-color: hsl({{slot.slot_subject.id | multiplicar }}, 71%, 82%);" >{{slot.slot_subject}}</td> 
                                                    
                                                    {% endif %}
                                                {% endif %}
                                            {%endfor%}                                                                                                                      
                                    {%endfor%}  
                                {% endfor %}
                              </tr>
                              <tr>
                                <th>Jueves</th>
                                {%for slot in subjectsAll%}
                              
                                  {%if slot.day.id == 4 %}                          
                                    {%if slot.standard|parseada == a.name|parseada %}                                                           
                                      <td  style="background-color: hsl({{slot.slot_subject.id | multiplicar }}, 71%, 82%);" >{{slot.slot_subject}}</td>                                                {%endif%}                                     
                                  {% endif %}    
                                {% endfor %}
                              </tr>
                              <tr>
                                <th>Viernes</th>
                                {%for slot in subjectsAll%}
                              
                                  {%if slot.day.id == 5 %}                          
                                    {%if slot.standard|parseada == a.name|parseada %}                                                           
                                      <td  style="background-color: hsl({{slot.slot_subject.id | multiplicar }}, 71%, 82%);" >{{slot.slot_subject}}</td>                                                {%endif%}                                     
                                  {% endif %}    
                                {% endfor %}
                                
                              </tr>
                            </table>
                            
                      </div>
                        
                    </section> 

                    <div style="width: 100%;" class="d-flex justify-content-center ">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            
                            {% comment %} <th style="width: 5%;" scope="col">Nivel</th>
                            <th style="width: 22%;" scope="col">Curso</th>
                            <th style="width: 11%;" scope="col"></th>
                            <th style="width: 11%;" scope="col"></th>
                            <th style="width: 17%;" scope="col">Dia</th>
                            <th style="width: 17%;" scope="col">H.Inicio</th>
                            <th style="width: 17%;" scope="col">H.Final</th> {% endcomment %}
                            <th style="width: 5%;" scope="col">Nivel</th>
                            <th style="width: 20%;" scope="col">Curso</th>
                            <th style="width: 12%;" scope="col"></th>
                            <th style="width: 10%;" scope="col"></th>
                            <th style="width: 10%;" scope="col">Dia</th>
                            <th style="width: 11%;" scope="col">H.Inicio</th>
                            <th style="width: 11%;" scope="col">H.Final</th>
                            <th style="width: 21%;" scope="col">Acciones</th>
                       
                          </tr>
                        </thead>
                        <tbody style="width: 100%;">
                          {% for subject in a.subjects.all %}                                                
                          
                            {% if subject.standard_slots_subject.all.count == 0 %}
                              <tr>
                               
                                {% comment %} <td style="width: 5%;">{{subject.standard.id}}</td>
                                <td style="width: 22%;">{{subject.name}}</td>
                                <td style="width: 11%;"><span style="width: 5%;"></span><a style="width: 95%;"   href="{% url 'curriculum:slot_subject_create' standard=subject.standard.slug slug=subject.slug %}"  class="btn btn-success">Agregar</a></td>
                                <td style="width: 11%;"></td>
                                <td style="width: 17%;" class="text-center"></td>
                                <td style="width: 17%;"></td>
                                <td style="width: 17%;"></td> {% endcomment %}
                                <td style="width: 5%;">{{subject.standard.id}}</td>
                                <td style="width: 20%;">{{subject.name}}</td>
                                <td style="width: 12%;"><span style="width: 5%;"></span><a style="width: 95%;"   href="{% url 'curriculum:slot_subject_create' standard=subject.standard.slug slug=subject.slug %}"  class="btn btn-success">Agregar</a></td>
                                <td style="width: 10%;"></td>
                                <td style="width: 10%;" class="text-center"></td>
                                <td style="width: 11%;"></td>
                                <td style="width: 11%;"></td>
                                <td style="width: 21%;"></td>
                              </tr>
                            {% else%}
                              {% for slot in subject.standard_slots_subject.all %}
                              
                                {% if forloop.first or standard_slots_subject.all.count == 1%}
                                  
                                  <tr>
                                    
                                    {% comment %} <td  rowspan="{{subject.standard_slots_subject.all.count}}"  style="width: 5%;">{{subject.standard.id}}</td>
                                    <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 22%;">{{subject.name}}</td>
                                    <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 11%;"><span style="width: 5%;"></span><a style="width: 95%;"   href="{% url 'curriculum:slot_subject_create' standard=subject.standard.slug slug=subject.slug %}"  class="btn btn-success">Agregar</a></td>
                                    <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 11%;"><a  type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="{{subject.id|combinacion2}}" style="width: 100%;">horario</a> </td>
                                    <td style="width: 17%;">{{slot.day|formatoDia}}</td>
                                    <td style="width: 17%;">{{slot.slot.start_time|formatoHora}}</td>
                                    <td style="width: 17%;">{{slot.slot.end_time|formatoHora}}</td> {% endcomment %}
                                    <td  rowspan="{{subject.standard_slots_subject.all.count}}"  style="width: 5%;">{{subject.standard.id}}</td>
                                    <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 20%;">{{subject.name}}</td>
                                    <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 12%;"><span style="width: 5%;"></span><a style="width: 95%;"   href="{% url 'curriculum:slot_subject_create' standard=subject.standard.slug slug=subject.slug %}"  class="btn btn-success">Agregar</a></td>
                                    <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 10%;"><a  type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="{{subject.id|combinacion2}}" style="width: 100%;">horario</a> </td>
                                    <td style="width: 10%;">{{slot.day|formatoDia}}</td>
                                    <td style="width: 11%;">{{slot.slot.start_time|formatoHora}}</td>
                                    <td style="width: 11%;">{{slot.slot.end_time|formatoHora}}</td>   
                                    <td style="width: 19%;">
                                      <a style="width: 47%;"   href="{% url 'curriculum:slot_subject_update' id=slot.id %}"   class="btn btn-outline-success">Editar</a><span style="width: 0%;"> </span><a style="width: 47%;" class="btn btn-outline-danger" href="{% url 'curriculum:slot_subject_delete' id=slot.id %}" >Eliminar</a> 
                                    </td>
                                    {% comment %} <td style="width: 11%;">{{slot.day|formatoDia}}</td>
                                    <td style="width: 11%;">{{slot.slot.start_time|formatoHora}}</td>
                                    <td style="width: 11%;">{{slot.slot.end_time|formatoHora}}</td>
                                    <td style="width: 18%;">
                                      <a style="width: 45%;"  href=""   class="btn btn-outline-success">Editar</a><span style="width: 4%;"> </span><a style="width: 45%;" class="btn btn-outline-danger" href="" >Eliminar</a> 
                                    </td> {% endcomment %}
                                    
                                  </tr>
                                {% else %}
                                  <tr>                                
                                    {% comment %} <td style="width: 17%;">{{slot.day|formatoDia}}</td>
                                    <td style="width: 17%;">{{slot.slot.start_time|formatoHora}}</td>
                                    <td style="width: 17%;">{{slot.slot.end_time|formatoHora}}</td>                               {% endcomment %}
                                    <td style="width: 10%;">{{slot.day|formatoDia}}</td>
                                    <td style="width: 11%;">{{slot.slot.start_time|formatoHora}}</td>
                                    <td style="width: 11%;">{{slot.slot.end_time|formatoHora}}</td>   
                                    <td style="width: 19%;">
                                      <a style="width: 47%;"   href="{% url 'curriculum:slot_subject_update' id=slot.id %}"   class="btn btn-outline-success">Editar</a><span style="width: 0%;"> </span><a style="width: 47%;" class="btn btn-outline-danger" href="{% url 'curriculum:slot_subject_delete' id=slot.id %}" >Eliminar</a> 
                                    </td>
                                  </tr>
                                {% endif %}
                              {% endfor %}
                                {% comment %} <tr>                                
                                    <td style="width: 5%;">{{subject.standard.id}}</td>
                                    <td style="width: 30%;">{{subject.name}}</td>
                                   
                                    <td style="width: 45%;"><a type="button" class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="{{subject.id|combinacion2}}" style="width: 30%;">ver</a> <span style="width: 5%;"> </span><a style="width: 30%;"   href="{% url 'curriculum:slot_subject_update' standard=subject.standard.slug subject=subject.slug %}"  class="btn btn-outline-success">Editar</a><span style="width: 5%;"> </span><a style="width: 30%;"   href="" class="btn btn-outline-danger">Eliminar</a></td>
                                </tr>                                                                                       {% endcomment %}
                            {% endif %}
                              
                              {% comment %} {% for lesson in subject.lessons.all  %}
                                {% if forloop.first or subject.lessons.all.count == 1  %}
                                  <tr style="width: 100%;">                    
                                    <td rowspan="{{subject.lessons.all.count}}" style="width:22%;"  >{{subject.name}}</td>
                                    <td style="width: 16%;" rowspan="{{subject.lessons.all.count}}" ><a  class="btn btn-success" href="{% url 'curriculum:lesson_create' standard=subject.standard.slug slug=subject.slug %}"  style="align-self: center;width: 100%;"class="dropdown-item" >agregar capitulo</a></td>
                                    <td rowspan="{{subject.lessons.all.count}}" style="width: 7%;"><a  type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="{{subject.id|combinacion2}}" style="width: 100%;">horario</a></td>
                                    <td style="width: 5%;" >{{lesson.position}}</td>
                                    <td style="width: 20%;" >{{lesson.name}}</td>
                                    <td style="width: 30%;" ><a style="width: 30%;"   href="{% url 'curriculum:lesson_detail' slug=lesson.slug subject=subject.slug standard=lesson.Standard.slug %}"  class="btn btn-outline-primary">Ver</a><span style="width: 4%;"></span> <a style="width: 30%;"   href="{% url 'curriculum:lesson_update' standard=subject.standard.slug subject=lesson.subject.slug slug=lesson.slug %}"  class="btn btn-outline-success">Editar</a><span style="width: 4%;"> </span><a style="width: 30%;" class="btn btn-outline-danger" href="{% url 'curriculum:lesson_delete' standard=subject.standard.slug subject=lesson.subject.slug slug=lesson.slug %}" >Eliminar</a></td>
                                  </tr>
                                {% else %}
                                  <tr style="width: 100%;">                    
                                    <td style="width: 5%;" >{{lesson.position}}</td>                          
                                    <td style="width: 20%;" >{{lesson.name}}</td>
                                    <td style="width: 30%;" ><a style="width: 30%;"   href="{% url 'curriculum:lesson_detail' slug=lesson.slug subject=subject.slug standard=lesson.Standard.slug %}"  class="btn btn-outline-primary">Ver</a><span style="width: 4%;"></span> <a style="width: 30%;" href="{% url 'curriculum:lesson_update' standard=subject.standard.slug subject=lesson.subject.slug slug=lesson.slug %}"     class="btn btn-outline-success">Editar</a><span style="width: 4%;"> </span><a style="width: 30%;" class="btn btn-outline-danger" href="{% url 'curriculum:lesson_delete' standard=subject.standard.slug subject=lesson.subject.slug slug=lesson.slug %}">Eliminar</a></td>
                                  </tr> 
                                {% endif %}
                              {% endfor %} {% endcomment %}

                              <div class=" modal " id="{{subject.id|parseada2}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="{{subject.id|combinacionLabel}}" aria-hidden="true" style="display: none; width: 100%;">
                                <div class="modal-dialog modal-dialog-centered">
                                  <div class="modal-content">
                                    <div class="modal-header bg-success-subtle">
                                      <h1 class="modal-title fs-5" style="color:black ;" id="staticBackdropLabel">Horario del curso de {{subject.name}}</h1>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body bg-warning-subtle">
                                    
                                      {% for day in subject.standard_slots_subject.all %}
                                        {% if day.day.id == 1 %}
                                          Lunes: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                                        {% endif %}
                          
                                        {% if day.day.id == 2 %}
                                          Martes: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                          
                                        {% endif %}
                          
                                        {% if day.day.id == 3 %}
                                          Miercoles: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                          
                                        {% endif %}
                          
                                        {% if day.day.id == 4 %}
                                          Jueves: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                          
                                        {% endif %}
                          
                                        {% if day.day.id == 5 %}
                                          Viernes: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                                        {% endif %}
                                                        
                                      {% endfor %}   
                                    </div>
                                    <div class="modal-footer">        
                                    </div>
                                  </div>
                                </div>
                              </div>                            
                          {%endfor%} 
                        </tbody>
                      </table>
                    </div>  
                  </div>        
                </div>         
              <div style="margin-top: 1rem;">      
            </div>        
          {%endfor%}  
        </div>
      </div>
  </div> 
{%endblock%}

