{% extends 'base.html' %}
{% load static %}
{% load operation %}
{% block title %} Horarios {% endblock %}

{% block image_block %}
<link rel="stylesheet" href="{% static 'css/secundary_style.css' %}">
{% comment %} <link rel="stylesheet" href="https://dl.dropbox.com/scl/fi/3wq2ax1oudmm1x8pudfpj/secundary_style.css?rlkey=hf5nul7oh9a3odsrm9j27uqx7&dl=0"> {% endcomment %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

<link rel="stylesheet" href="{% static 'css/principal_style.css' %}">

{% comment %} <link rel="stylesheet" href="https://dl.dropbox.com/scl/fi/mji6gnf1x22n1mczabfb0/principal_style.css?rlkey=a00iz56alb8eh01rla3lbbyux&dl=0"> {% endcomment %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
<div style="height: 15vh;"></div>

{% endblock %}

{% block content %}
  <div class="d-flex row justify-content-center slot-list-view" >
      <h2 class="text-center mt-5 mb-4" style="font-size: 3rem;">Horarios de los cursos</h2>
  

      <div class="d-flex justify-content-center">
        <div class="contenedor-niveles">
          
          {%for a in standards.all%}
            {% if user.is_superuser %}
              <p style="width: 90%;">
                <button class="btn btn-primary" style="width: 100%;" type="button" data-bs-toggle="collapse" data-bs-target={{a.slug|combinacion}} aria-expanded="false" aria-controls={{a.slug|parseada}}>
                {{a.slug}}
                </button>
              </p>            
              <div class="collapse " id="{{a.slug|parseada}}" style="margin-top: -1rem;width: 90%;">
                <div class="card card-body d-flex justify-content-center ">
                  <section id="best-features" class="text-center" style=" width: 100%;justify-self: center;">                    
                    <div class="col-md-12 justify-content-center mb-5">                    
                          <table id="class-time-table" class="tabla-encabezado">
                            <tr>
                              <th></th>                    
                      

                              <th scope="row">Lunes</th>
                              <th scope="row">Martes</th>
                              <th scope="row">Miercoles</th>
                              <th scope="row">Jueves</th>
                              <th scope="row">Viernes</th>                             
                            </tr>

                            <tr>
                                                            
                              <th>8 a.m. - 9 a.m.</th>
                                                                                                                                             
                                                                                      
                                {%for subject in a.subjects.all%}
                                
                                  {%if subject.standard_slots_subject.all.count != 0 %}
                                                                            
                                      {%for slot in subject.standard_slots_subject.all %}
                                     
                                    
                                    
                                        {%if slot.day.id == 1 and slot.slot.id == 1 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                    
                                        {% endif %}    
                                        {%if slot.day.id == 2 and slot.slot.id == 1 %}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                      
                                        {% endif %}  
                                        {%if slot.day.id == 3 and slot.slot.id == 1 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                       
                                        {% endif %}  
                                        {%if slot.day.id == 4 and slot.slot.id == 1 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                         
                                        {% endif %}  
                                        {%if slot.day.id == 5 and slot.slot.id == 1%}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                      
                                        {% endif %}                                             
                                      {%endfor%}                                                                                                                                                           
                                  {% endif %}
                         
                                {%endfor%}
                                                                                                                    
                            
                            </tr>
                            <tr>
                              <th>9 a.m. - 10 a.m.</th>
                              {%for subject in a.subjects.all%}
                                
                                {%if subject.standard_slots_subject.all.count != 0 %}
                                                                          
                                    {%for slot in subject.standard_slots_subject.all %}
                                  
                                  
                                  
                                      {%if slot.day.id == 1 and slot.slot.id == 2 %}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                
                                      {% endif %}    
                                      {%if slot.day.id == 2 and slot.slot.id == 2 %}                                                                                                                                    
                                      <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                             
                                      {% endif %}  
                                      {%if slot.day.id == 3 and slot.slot.id == 2 %}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                           
                                      {% endif %}  
                                      {%if slot.day.id == 4 and slot.slot.id == 2 %}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                      
                                      {% endif %}  
                                      {%if slot.day.id == 5 and slot.slot.id == 2%}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                    
                                      {% endif %}                                             
                                    {%endfor%}                                                                                                                                                           
                                {% endif %}
                
                              {%endfor%}
                                          
                            </tr>
                            <tr>
                              <th>10 a.m. - 11 a.m.</th>
                              {%for subject in a.subjects.all%}
                                
                                {%if subject.standard_slots_subject.all.count != 0 %}
                                                                          
                                    {%for slot in subject.standard_slots_subject.all %}
                                                                                                      
                                      {%if slot.day.id == 1 and slot.slot.id == 3%}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                  
                                      {% endif %}    
                                      {%if slot.day.id == 2 and slot.slot.id == 3 %}                                                                                                                                    
                                      <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                        
                                      {% endif %}  
                                      {%if slot.day.id == 3 and slot.slot.id == 3 %}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                   
                                      {% endif %}  
                                      {%if slot.day.id == 4 and slot.slot.id == 3 %}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                  
                                      {% endif %}  
                                      {%if slot.day.id == 5 and slot.slot.id == 3%}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                          
                                      {% endif %}                                             
                                    {%endfor%}                                                                                                                                                           
                                {% endif %}
                           
                              {%endfor%}
                                          
                            </tr>
                            <tr>
                              <th>11 a.m. - 12 m.</th>
                                {%for subject in a.subjects.all%}
                                  
                                  {%if subject.standard_slots_subject.all.count != 0 %}
                                                                            
                                      {%for slot in subject.standard_slots_subject.all %}
                                    
                                    
                                    
                                        {%if slot.day.id == 1 and slot.slot.id == 4 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                             
                                        {% endif %}    
                                        {%if slot.day.id == 2 and slot.slot.id == 4 %}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                   
                                        {% endif %}  
                                        {%if slot.day.id == 3 and slot.slot.id == 4 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                   
                                        {% endif %}  
                                        {%if slot.day.id == 4 and slot.slot.id == 4 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                
                                        {% endif %}  
                                        {%if slot.day.id == 5 and slot.slot.id == 4%}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                        {% endif %}                                             
                                      {%endfor%}                                                                                                                                                           
                                  {% endif %}
                                 
                                {%endfor%}
                                          
                            </tr>
                            <tr>
                              <th>12 m. - 13 p.m.</th>
                                {%for subject in a.subjects.all%}
                                  
                                  {%if subject.standard_slots_subject.all.count != 0 %}
                                                                            
                                      {%for slot in subject.standard_slots_subject.all %}
                                    
                                    
                                    
                                        {%if slot.day.id == 1 and slot.slot.id == 5 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                      
                                        {% endif %}    
                                        {%if slot.day.id == 2 and slot.slot.id == 5 %}                                                                                                                                    
                                        <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                      
                                        {% endif %}  
                                        {%if slot.day.id == 3 and slot.slot.id == 5 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                            
                                        {% endif %}  
                                        {%if slot.day.id == 4 and slot.slot.id == 5 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                             
                                        {% endif %}  
                                        {%if slot.day.id == 5 and slot.slot.id == 5%}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                             
                                        {% endif %}                                             
                                      {%endfor%}                                                                                                                                                           
                                  {% endif %}
                               
                                {%endfor%}
                                          
                            </tr>
                          </table>
                          
                    </div>
                      
                  </section> 

                  <div style="width: 100%;" class="d-flex justify-content-center ">
                    <table class="table table-hover">
                      <thead>
                        <tr>
                          
                          {% comment %} <th style="width: 5%;" scope="col">Nivel</th>
                          <th style="width: 22%;" scope="col">Curso</th>
                          <th style="width: 11%;" scope="col"></th>
                          <th style="width: 11%;" scope="col"></th>
                          <th style="width: 17%;" scope="col">Dia</th>
                          <th style="width: 17%;" scope="col">H.Inicio</th>
                          <th style="width: 17%;" scope="col">H.Final</th> {% endcomment %}
                          {% if user.is_superuser %}
                            <th style="width: 5%;" scope="col">Area</th>
                            <th style="width: 20%;" scope="col">Curso</th>
                            <th style="width: 12%;" scope="col"></th>
                            <th style="width: 10%;" scope="col"></th>
                            <th style="width: 10%;" scope="col">Dia</th>
                            <th style="width: 11%;" scope="col">H.Inicio</th>
                            <th style="width: 11%;" scope="col">H.Final</th>
                            <th style="width: 21%;" scope="col">Acciones</th>
                                                          
                          {% else %}

                                <th style="width: 5%;" scope="col">Area</th>
                                <th style="width: 30%;" scope="col">Curso</th>
                                <th style="width: 15%;" scope="col"></th>
                                <th style="width: 16%;" scope="col">Dia</th>
                                <th style="width: 17%;" scope="col">H.Inicio</th>
                                <th style="width: 17%;" scope="col">H.Final</th>
                          {% endif %}
                          
                        </tr>
                      </thead>
                      <tbody style="width: 100%;">
                        {% for subject in a.subjects.all %}                                                
                        
                          {% if subject.standard_slots_subject.all.count == 0 %}
                            {% if user.is_superuser %}
                              <tr>

                                <td style="width: 5%;">{{subject.standard.id}}</td>
                                <td style="width: 20%;">{{subject.name}}</td>
                                <td style="width: 12%;"><span style="width: 5%;"></span><a style="width: 95%;"   href="{% url 'niveles:slot_subject_create' standard=subject.standard.slug slug=subject.slug %}"  class="btn btn-success">Agregar</a></td>
                                <td style="width: 10%;"></td>
                                <td style="width: 10%;" class="text-center"></td>
                                <td style="width: 11%;"></td>
                                <td style="width: 11%;"></td>
                                <td style="width: 21%;"></td>
                              </tr>
                            {% else %}

                                  <tr>                                  
                                    <td style="width: 5%;">{{subject.standard.id}}</td>
                                    <td style="width: 30%;">{{subject.name}}</td>
                                    <td style="width: 15%;"></td>
                                    <td style="width: 16%;" class="text-center"></td>
                                    <td style="width: 17%;"></td>
                                    <td style="width: 17%;"></td>
                                                                      
                                  </tr>
                            
                            {% endif %}
                          {% else%}
                            {% for slot in subject.standard_slots_subject.all %}
                            
                              {% if forloop.first or standard_slots_subject.all.count == 1%}
                                {% if user.is_superuser %}
                                  <tr>

                                    <td  rowspan="{{subject.standard_slots_subject.all.count}}"  style="width: 5%;">{{subject.standard.id}}</td>
                                    <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 20%;">{{subject.name}}</td>
                                    <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 12%;"><span style="width: 5%;"></span><a style="width: 95%;"   href="{% url 'niveles:slot_subject_create' standard=subject.standard.slug slug=subject.slug %}"  class="btn btn-success">Agregar</a></td>
                                    <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 10%;"><a  type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="{{subject.id|combinacion2}}" style="width: 100%;">horario</a> </td>
                                    <td style="width: 10%;">{{slot.day|formatoDia}}</td>
                                    <td style="width: 11%;">{{slot.slot.start_time|formatoHora}}</td>
                                    <td style="width: 11%;">{{slot.slot.end_time|formatoHora}}</td>   
                                    <td style="width: 19%;">
                                      <a style="width: 47%;"   href="{% url 'niveles:slot_subject_update' id=slot.id %}"   class="btn btn-outline-success">Editar</a><span style="width: 0%;"> </span><a style="width: 47%;" class="btn btn-outline-danger" href="{% url 'niveles:slot_subject_delete' id=slot.id %}" >Eliminar</a> 
                                    </td>
                                    
                                  </tr>
                                {% else %}
                                                            
                                      <tr>

                                        <td  rowspan="{{subject.standard_slots_subject.all.count}}"  style="width: 5%;">{{subject.standard.id}}</td>

                                        <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 30%;">{{subject.name}}</td>

                                        <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 15%;"><a  type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="{{subject.id|combinacion2}}" style="width: 100%;">horario</a> </td>

                                        <td style="width: 16%;">{{slot.day|formatoDia}}</td>

                                        <td style="width: 17%;">{{slot.slot.start_time|formatoHora}}</td>

                                        <td style="width: 17%;">{{slot.slot.end_time|formatoHora}}</td>   
                                                                            
                                      </tr>
                                  
                                {% endif %}
                                                                      
                              {% else %}
                                {% if user.is_superuser %}  
                                  <tr>                                
                                    <td style="width: 10%;">{{slot.day|formatoDia}}</td>
                                    <td style="width: 11%;">{{slot.slot.start_time|formatoHora}}</td>
                                    <td style="width: 11%;">{{slot.slot.end_time|formatoHora}}</td>   
                                    <td style="width: 19%;">
                                      <a style="width: 47%;"   href="{% url 'niveles:slot_subject_update' id=slot.id %}"   class="btn btn-outline-success">Editar</a><span style="width: 0%;"> </span><a style="width: 47%;" class="btn btn-outline-danger" href="{% url 'niveles:slot_subject_delete' id=slot.id %}" >Eliminar</a> 
                                    </td>
                                  </tr>
                                {% else %}
                            
                                      <tr>                                
                                        <td style="width: 16%;">{{slot.day|formatoDia}}</td>
                                        <td style="width: 17%;">{{slot.slot.start_time|formatoHora}}</td>
                                        <td style="width: 17%;">{{slot.slot.end_time|formatoHora}}</td>   
                                      </tr>
                                  
                                {% endif %}
                              {% endif %}
                            {% endfor %}
                          {% endif %}
                                                
                            <div class=" modal " id="{{subject.id|parseada2}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="{{subject.id|combinacionLabel}}" aria-hidden="true" style="display: none; width: 100%;">
                              <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                  <div class="modal-header bg-success-subtle">
                                    <h1 class="modal-title fs-5" style="color:black ;" id="staticBackdropLabel">Horario del curso de {{subject.name}}</h1>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                  </div>
                                  <div class="modal-body bg-warning-subtle">
                                  
                                    {% for day in subject.standard_slots_subject.all %}
                                      {% if day.day.id == 1 %}
                                        Lunes: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                                      {% endif %}
                        
                                      {% if day.day.id == 2 %}
                                        Martes: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                        
                                      {% endif %}
                        
                                      {% if day.day.id == 3 %}
                                        Miercoles: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                        
                                      {% endif %}
                        
                                      {% if day.day.id == 4 %}
                                        Jueves: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                        
                                      {% endif %}
                        
                                      {% if day.day.id == 5 %}
                                        Viernes: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                                      {% endif %}
                                                      
                                    {% endfor %}   
                                  </div>
                                  <div class="modal-footer">        
                                  </div>
                                </div>
                              </div>
                            </div>                            
                        {%endfor%} 
                      </tbody>
                    </table>
                  </div>  
                </div>        
              </div>         
              <div style="margin-top: 1rem;">      
              </div>
            {% else %} 
              {% for usuario in usersAll.all %}
                {% if user.username == usuario.user.username and  a.id|parseada == usuario.bio|parseada %}
                  <p style="width: 90%;">
                    <button class="btn btn-primary" style="width: 100%;" type="button" data-bs-toggle="collapse" data-bs-target={{a.slug|combinacion}} aria-expanded="false" aria-controls={{a.slug|parseada}}>
                    {{a.slug}}
                    </button>
                  </p>            
                  <div class="collapse " id="{{a.slug|parseada}}" style="margin-top: -1rem;width: 90%;">
                    <div class="card card-body d-flex justify-content-center ">
                      <section id="best-features" class="text-center" style=" width: 100%;justify-self: center;">                    
                        <div class="col-md-12 justify-content-center mb-5">                    
                              <table id="class-time-table" class="tabla-encabezado">
                                <tr>
                                  <th></th>                    
                                  {% comment %} <th scope="row">8 a.m. - 9 a.m.</th>
                                  <th scope="row">9 a.m. - 10 a.m.</th>
                                  <th scope="row">10 a.m. - 11 a.m.</th>
                                  <th scope="row">11 a.m. - 12 m.</th>
                                  <th scope="row">12 m. - 13 p.m.</th> {% endcomment %}
    
                                  <th scope="row">Lunes</th>
                                  <th scope="row">Martes</th>
                                  <th scope="row">Miercoles</th>
                                  <th scope="row">Jueves</th>
                                  <th scope="row">Viernes</th>
                                  {% comment %} <th scope="row">1 p.m.</th>
                                  <th scope="row">2 p.m.</th> {% endcomment %}
                                </tr>
    
                                <tr>
                                                                
                                  <th>8 a.m. - 9 a.m.</th>
                                                              
                                  {% comment %} {% for slt in slotsAll.all %}                                 {% endcomment %}
                                                                  
                                                                                          
                                    {%for subject in a.subjects.all%}
                                    
                                      {%if subject.standard_slots_subject.all.count != 0 %}
                                                                                
                                          {%for slot in subject.standard_slots_subject.all %}
                                         
                                        
                                        
                                            {%if slot.day.id == 1 and slot.slot.id == 1 %}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}    
                                            {%if slot.day.id == 2 and slot.slot.id == 1 %}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                            {% endif %}  
                                            {%if slot.day.id == 3 and slot.slot.id == 1 %}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}  
                                            {%if slot.day.id == 4 and slot.slot.id == 1 %}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}  
                                            {%if slot.day.id == 5 and slot.slot.id == 1%}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}                                             
                                          {%endfor%}                                                                                                                                                           
                                      {% endif %}
                                   
                                    {%endfor%}
                                                                                                                                          
    
                                
                                </tr>
                                <tr>
                                  <th>9 a.m. - 10 a.m.</th>
                                  {%for subject in a.subjects.all%}
                                    
                                    {%if subject.standard_slots_subject.all.count != 0 %}
                                                                              
                                        {%for slot in subject.standard_slots_subject.all %}
                                      
                                      
                                      
                                          {%if slot.day.id == 1 and slot.slot.id == 2 %}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                          {% endif %}    
                                          {%if slot.day.id == 2 and slot.slot.id == 2 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                             
                                          {% endif %}  
                                          {%if slot.day.id == 3 and slot.slot.id == 2 %}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                          {% endif %}  
                                          {%if slot.day.id == 4 and slot.slot.id == 2 %}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                          {% endif %}  
                                          {%if slot.day.id == 5 and slot.slot.id == 2%}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                          {% endif %}                                             
                                        {%endfor%}                                                                                                                                                           
                                    {% endif %}
                                 
                                  {%endfor%}
                                              
                                </tr>
                                <tr>
                                  <th>10 a.m. - 11 a.m.</th>
                                  {%for subject in a.subjects.all%}
                                    
                                    {%if subject.standard_slots_subject.all.count != 0 %}
                                                                              
                                        {%for slot in subject.standard_slots_subject.all %}
                                                                                                          
                                          {%if slot.day.id == 1 and slot.slot.id == 3%}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                          {% endif %}    
                                          {%if slot.day.id == 2 and slot.slot.id == 3 %}                                                                                                                                    
                                          <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                             
                                          {% endif %}  
                                          {%if slot.day.id == 3 and slot.slot.id == 3 %}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                          {% endif %}  
                                          {%if slot.day.id == 4 and slot.slot.id == 3 %}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                          {% endif %}  
                                          {%if slot.day.id == 5 and slot.slot.id == 3%}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                          {% endif %}                                             
                                        {%endfor%}                                                                                                                                                           
                                    {% endif %}
                                 
                                  {%endfor%}
                                              
                                </tr>
                                <tr>
                                  <th>11 a.m. - 12 m.</th>
                                    {%for subject in a.subjects.all%}
                                      
                                      {%if subject.standard_slots_subject.all.count != 0 %}
                                                                                
                                          {%for slot in subject.standard_slots_subject.all %}
                                        
                                        
                                        
                                            {%if slot.day.id == 1 and slot.slot.id == 4 %}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}    
                                            {%if slot.day.id == 2 and slot.slot.id == 4 %}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                            {% endif %}  
                                            {%if slot.day.id == 3 and slot.slot.id == 4 %}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}  
                                            {%if slot.day.id == 4 and slot.slot.id == 4 %}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}  
                                            {%if slot.day.id == 5 and slot.slot.id == 4%}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}                                             
                                          {%endfor%}                                                                                                                                                           
                                      {% endif %}
                                      {% comment %} {% if total.all.count|add:variable == total.all.count %}
                                        <td>{{total.all.count|add:variable}}</td>                                    
                                      {% endif %}  {% endcomment %}
                                    {%endfor%}
                                              
                                </tr>
                                <tr>
                                  <th>12 m. - 13 p.m.</th>
                                    {%for subject in a.subjects.all%}
                                      
                                      {%if subject.standard_slots_subject.all.count != 0 %}
                                                                                
                                          {%for slot in subject.standard_slots_subject.all %}
                                        
                                        
                                        
                                            {%if slot.day.id == 1 and slot.slot.id == 5 %}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}    
                                            {%if slot.day.id == 2 and slot.slot.id == 5 %}                                                                                                                                    
                                            <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                               
                                            {% endif %}  
                                            {%if slot.day.id == 3 and slot.slot.id == 5 %}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}  
                                            {%if slot.day.id == 4 and slot.slot.id == 5 %}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}  
                                            {%if slot.day.id == 5 and slot.slot.id == 5%}                                                                                                                                    
                                              <td  style="background-color: hsl({{slot.slot_subject.id|multiplicar }}, 71%, 82%);" >{{slot.slot_subject}} </td>   
                                 
                                            {% endif %}                                             
                                          {%endfor%}                                                                                                                                                           
                                      {% endif %}
                                    
                                    {%endfor%}
                                              
                                </tr>
                              </table>
                              
                        </div>
                          
                      </section>  
                      <div style="width: 100%;" class="d-flex justify-content-center ">
                        <table class="table table-hover">
                          <thead>
                            <tr>                              
                              {% if user.is_superuser %}
                                <th style="width: 5%;" scope="col">Nivel</th>
                                <th style="width: 20%;" scope="col">Curso</th>
                                <th style="width: 12%;" scope="col"></th>
                                <th style="width: 10%;" scope="col"></th>
                                <th style="width: 10%;" scope="col">Dia</th>
                                <th style="width: 11%;" scope="col">H.Inicio</th>
                                <th style="width: 11%;" scope="col">H.Final</th>
                                <th style="width: 21%;" scope="col">Acciones</th>
                                                              
                              {% else %}    
                                    <th style="width: 5%;" scope="col">Nivel</th>
                                    <th style="width: 30%;" scope="col">Curso</th>
                                    <th style="width: 15%;" scope="col"></th>
                                    <th style="width: 16%;" scope="col">Dia</th>
                                    <th style="width: 17%;" scope="col">H.Inicio</th>
                                    <th style="width: 17%;" scope="col">H.Final</th>
                              {% endif %}                              
                            </tr>
                          </thead>
                          <tbody style="width: 100%;">
                            {% for subject in a.subjects.all %}                                                
                            
                              {% if subject.standard_slots_subject.all.count == 0 %}
                                {% if user.is_superuser %}
                                  <tr>
    
                                    <td style="width: 5%;">{{subject.standard.id}}</td>
                                    <td style="width: 20%;">{{subject.name}}</td>
                                    <td style="width: 12%;"><span style="width: 5%;"></span><a style="width: 95%;"   href="{% url 'niveles:slot_subject_create' standard=subject.standard.slug slug=subject.slug %}"  class="btn btn-success">Agregar</a></td>
                                    <td style="width: 10%;"></td>
                                    <td style="width: 10%;" class="text-center"></td>
                                    <td style="width: 11%;"></td>
                                    <td style="width: 11%;"></td>
                                    <td style="width: 21%;"></td>
                                  </tr>
                                {% else %}    
                                      <tr>                                  
                                        <td style="width: 5%;">{{subject.standard.id}}</td>
                                        <td style="width: 30%;">{{subject.name}}</td>
                                        <td style="width: 15%;"></td>
                                        <td style="width: 16%;" class="text-center"></td>
                                        <td style="width: 17%;"></td>
                                        <td style="width: 17%;"></td>
                                                                          
                                      </tr>                                
                                {% endif %}
                              {% else%}
                                {% for slot in subject.standard_slots_subject.all %}
                                
                                  {% if forloop.first or standard_slots_subject.all.count == 1%}
                                    {% if user.is_superuser %}
                                      <tr>    
                                        <td  rowspan="{{subject.standard_slots_subject.all.count}}"  style="width: 5%;">{{subject.standard.id}}</td>
                                        <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 20%;">{{subject.name}}</td>
                                        <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 12%;"><span style="width: 5%;"></span><a style="width: 95%;"   href="{% url 'niveles:slot_subject_create' standard=subject.standard.slug slug=subject.slug %}"  class="btn btn-success">Agregar</a></td>
                                        <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 10%;"><a  type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="{{subject.id|combinacion2}}" style="width: 100%;">horario</a> </td>
                                        <td style="width: 10%;">{{slot.day|formatoDia}}</td>
                                        <td style="width: 11%;">{{slot.slot.start_time|formatoHora}}</td>
                                        <td style="width: 11%;">{{slot.slot.end_time|formatoHora}}</td>   
                                        <td style="width: 19%;">
                                          <a style="width: 47%;"   href="{% url 'niveles:slot_subject_update' id=slot.id %}"   class="btn btn-outline-success">Editar</a><span style="width: 0%;"> </span><a style="width: 47%;" class="btn btn-outline-danger" href="{% url 'niveles:slot_subject_delete' id=slot.id %}" >Eliminar</a> 
                                        </td>
                                        
                                      </tr>
                                    {% else %}                                                                
                                          <tr>
    
                                            <td  rowspan="{{subject.standard_slots_subject.all.count}}"  style="width: 5%;">{{subject.standard.id}}</td>
    
                                            <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 30%;">{{subject.name}}</td>
    
                                            <td rowspan="{{subject.standard_slots_subject.all.count}}" style="width: 15%;"><a  type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="{{subject.id|combinacion2}}" style="width: 100%;">horario</a> </td>
    
                                            <td style="width: 16%;">{{slot.day|formatoDia}}</td>
    
                                            <td style="width: 17%;">{{slot.slot.start_time|formatoHora}}</td>
    
                                            <td style="width: 17%;">{{slot.slot.end_time|formatoHora}}</td>   
                                                                                
                                          </tr>                                      
                                    {% endif %}
                                                                          
                                  {% else %}
                                    {% if user.is_superuser %}  
                                      <tr>                                
                                        <td style="width: 10%;">{{slot.day|formatoDia}}</td>
                                        <td style="width: 11%;">{{slot.slot.start_time|formatoHora}}</td>
                                        <td style="width: 11%;">{{slot.slot.end_time|formatoHora}}</td>   
                                        <td style="width: 19%;">
                                          <a style="width: 47%;"   href="{% url 'niveles:slot_subject_update' id=slot.id %}"   class="btn btn-outline-success">Editar</a><span style="width: 0%;"> </span><a style="width: 47%;" class="btn btn-outline-danger" href="{% url 'niveles:slot_subject_delete' id=slot.id %}" >Eliminar</a> 
                                        </td>
                                      </tr>
                                    {% else %}                                
                                          <tr>                                
                                            <td style="width: 16%;">{{slot.day|formatoDia}}</td>
                                            <td style="width: 17%;">{{slot.slot.start_time|formatoHora}}</td>
                                            <td style="width: 17%;">{{slot.slot.end_time|formatoHora}}</td>   
                                          </tr>
                                      
                                    {% endif %}
                                  {% endif %}
                                {% endfor %}
                              {% endif %}                                                    
                                <div class=" modal " id="{{subject.id|parseada2}}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="{{subject.id|combinacionLabel}}" aria-hidden="true" style="display: none; width: 100%;">
                                  <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                      <div class="modal-header bg-success-subtle">
                                        <h1 class="modal-title fs-5" style="color:black ;" id="staticBackdropLabel">Horario del curso de {{subject.name}}</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                      </div>
                                      <div class="modal-body bg-warning-subtle">
                                      
                                        {% for day in subject.standard_slots_subject.all %}
                                          {% if day.day.id == 1 %}
                                            Lunes: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                                          {% endif %}
                            
                                          {% if day.day.id == 2 %}
                                            Martes: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                            
                                          {% endif %}
                            
                                          {% if day.day.id == 3 %}
                                            Miercoles: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                            
                                          {% endif %}
                            
                                          {% if day.day.id == 4 %}
                                            Jueves: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                            
                                          {% endif %}
                            
                                          {% if day.day.id == 5 %}
                                            Viernes: {{day.slot.start_time|formatoHora}} - {{day.slot.end_time|formatoHora}}<p></p>
                                          {% endif %}
                                                          
                                        {% endfor %}   
                                      </div>
                                      <div class="modal-footer">        
                                      </div>
                                    </div>
                                  </div>
                                </div>                            
                            {%endfor%} 
                          </tbody>
                        </table>
                      </div>  
                    </div>        
                  </div>         
                  <div style="margin-top: 1rem;">      
                  </div>
                {% endif %}
              {% endfor %}
            {% endif %}       
          {%endfor%}                    
        </div>
      </div>
  </div> 
{%endblock%}

